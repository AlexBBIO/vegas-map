<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>South Bay Open Houses - Saturday Feb 1</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        #map { height: 100vh; width: 100%; }
        .property-popup { max-width: 300px; }
        .property-popup h3 { margin-bottom: 8px; color: #1a1a1a; font-size: 14px; }
        .property-popup .price { font-size: 18px; font-weight: bold; color: #2563eb; margin-bottom: 8px; }
        .property-popup .details { font-size: 13px; color: #666; margin-bottom: 8px; }
        .property-popup .features { font-size: 12px; color: #888; margin-bottom: 8px; font-style: italic; }
        .property-popup .open-house { background: #22c55e; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; display: inline-block; margin-bottom: 8px; }
        .property-popup a { color: #2563eb; text-decoration: none; font-size: 13px; }
        .property-popup a:hover { text-decoration: underline; }
        .legend { 
            position: fixed; 
            bottom: 20px; 
            left: 20px; 
            background: white; 
            padding: 12px 16px; 
            border-radius: 8px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            font-size: 13px;
        }
        .legend h4 { margin-bottom: 8px; }
        .legend-item { display: flex; align-items: center; margin: 4px 0; }
        .legend-dot { width: 12px; height: 12px; border-radius: 50%; margin-right: 8px; }
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 12px 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .header h1 { font-size: 18px; }
        .header .count { color: #666; font-size: 14px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üè† South Bay Open Houses</h1>
        <span class="count">Saturday, Jan 31 ‚Ä¢ 4 properties</span>
    </div>
    <div id="map"></div>
    <div class="legend">
        <h4>Saturday Schedule</h4>
        <div class="legend-item">üü¢ 12pm: Gates Ave</div>
        <div class="legend-item">üü¢ 1pm: 1450 6th St</div>
        <div class="legend-item">üü¢ 2pm: 1806 6th & Blossom</div>
    </div>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const properties = [
            {
                address: "1450 6th St, Manhattan Beach",
                price: 5300000,
                beds: 6, baths: 5.5, sqft: 4537,
                features: "Pool, spa, outdoor fireplace",
                openHouse: "Sat 1pm - 4pm",
                lat: 33.8847, lng: -118.4033,
                url: "https://www.redfin.com/CA/Manhattan-Beach/1450-6th-St-90266/home/6704501"
            },
            {
                address: "1612 Gates Ave, Manhattan Beach",
                price: 5899000,
                beds: 5, baths: 5.5, sqft: 5080,
                features: "New construction 2025",
                openHouse: "Sat 12pm - 4pm",
                lat: 33.8892, lng: -118.4089,
                url: "https://www.redfin.com/CA/Manhattan-Beach/1612-Gates-Ave-90266/home/6702054"
            },
            {
                address: "1806 6th St, Manhattan Beach",
                price: 6350000,
                beds: 6, baths: 7, sqft: 5000,
                features: "New construction 2026, custom build",
                openHouse: "Sat 2pm - 4pm",
                lat: 33.8873, lng: -118.4033,
                url: "https://www.redfin.com/CA/Manhattan-Beach/1806-6th-St-90266/home/6702446"
            },
            {
                address: "1304 Blossom Ln, Redondo Beach",
                price: 2899000,
                beds: 5, baths: 5, sqft: 2958,
                features: "New construction, feels like single-family",
                openHouse: "Sat 2pm - 4pm",
                lat: 33.8712, lng: -118.3856,
                url: "https://www.redfin.com/CA/Redondo-Beach/1304-Blossom-Ln-90278/home/200201037"
            }
        ];

        // Initialize map centered on Manhattan Beach
        const map = L.map('map').setView([33.882, -118.398], 14);
        
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors'
        }).addTo(map);

        function formatPrice(price) {
            if (!price) return '';
            return '$' + (price / 1000000).toFixed(2) + 'M';
        }

        properties.forEach(prop => {
            const marker = L.circleMarker([prop.lat, prop.lng], {
                radius: 12,
                fillColor: '#22c55e',
                color: '#fff',
                weight: 2,
                opacity: 1,
                fillOpacity: 0.9
            }).addTo(map);

            let detailsHtml = '';
            if (prop.beds || prop.baths || prop.sqft) {
                const parts = [];
                if (prop.beds) parts.push(prop.beds + ' bed');
                if (prop.baths) parts.push(prop.baths + ' bath');
                if (prop.sqft) parts.push(prop.sqft.toLocaleString() + ' sqft');
                detailsHtml = `<div class="details">${parts.join(' ‚Ä¢ ')}</div>`;
            }

            let featuresHtml = prop.features ? `<div class="features">${prop.features}</div>` : '';
            let priceHtml = prop.price ? `<div class="price">${formatPrice(prop.price)}</div>` : '';

            const popup = `
                <div class="property-popup">
                    <h3>${prop.address}</h3>
                    ${priceHtml}
                    <div class="open-house">üïê ${prop.openHouse}</div>
                    ${detailsHtml}
                    ${featuresHtml}
                    <a href="${prop.url}" target="_blank">View on Redfin ‚Üí</a>
                </div>
            `;
            
            marker.bindPopup(popup);
        });

        // Fit bounds to show all markers
        const bounds = L.latLngBounds(properties.map(p => [p.lat, p.lng]));
        map.fitBounds(bounds, { padding: [50, 50] });

        setTimeout(() => {
            map.invalidateSize();
        }, 100);
    </script>
</body>
</html>
